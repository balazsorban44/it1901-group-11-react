<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/components/Band/Concerts.jsx | it1901-group-11</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/App.js~App.html">App</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-band">components/Band</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Band/Concerts.jsx~Concerts.html">Concerts</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Band/Reviews.jsx~AddReview.html">AddReview</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Band/TechnicalRequirements.jsx~TechnicalRequirements.html">TechnicalRequirements</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Band/index.js~Band.html">Band</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Reviews">Reviews</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-bookingboss">components/BookingBoss</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/BookingBoss/Bookings.jsx~Bookings.html">Bookings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/BookingBoss/index.js~BookingBoss.html">BookingBoss</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Booking">Booking</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-bookingmanager">components/BookingManager</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/BookingManager/BookingStepper.jsx~VerticalLinearStepper.html">VerticalLinearStepper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/BookingManager/NewBooking.jsx~NewBooking.html">NewBooking</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/BookingManager/Search.jsx~Search.html">Search</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/BookingManager/index.js~BookingManager.html">BookingManager</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-login">components/Login</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Login/index.jsx~Login.html">Login</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-manager">components/Manager</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Manager/index.js~Manager.html">Manager</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-organizer">components/Organizer</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Organizer/index.js~Organizer.html">Organizer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-EventInfo">EventInfo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ScenesList">ScenesList</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-prorganizer">components/PROrganizer</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/PROrganizer/index.js~PROrganizer.html">PROrganizer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ScenesList">ScenesList</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-servicemanager">components/ServiceManager</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/ServiceManager/index.js~ServiceManager.html">ServiceManager</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Scenes">Scenes</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-technician">components/Technician</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Technician/index.js~Technician.html">Technician</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Concerts">Concerts</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#utils">utils</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Icon">Icon</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-InfoSnippet">InfoSnippet</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Loading">Loading</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-NoResult">NoResult</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Rating">Rating</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Review">Review</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-capitalize">capitalize</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parseDate">parseDate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parseNumber">parseNumber</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parsePrice">parsePrice</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parseTime">parseTime</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-muiTheme">muiTheme</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-profiles">profiles</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/components/Band/Concerts.jsx</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React, {Component} from &apos;react&apos;

import { Table, TableBody, TableHeader,
  TableHeaderColumn, TableRow,
  TableRowColumn
} from &apos;material-ui/Table&apos;
import {parseDate, parseNumber, parsePrice, InfoSnippet, muiTheme} from &apos;../../utils&apos;


/**
  * Concert component
  */
export default class Concerts extends Component {
  /**
  * @return {JSX} Return a List of concerts divided into three sections, previous concerts and future accepted/awating approval concerts
  */
  render() {
    const {concerts, showPreviousConcerts, showFutureConcerts} = this.props
    const acceptedFutureBookings = {}
    const acceptedPreviousBookings = {}
    const awaitingBookings = {}
    if (concerts) {
      Object.keys(concerts).forEach(key =&gt; {
        const concert = concerts[key]
        const {isAcceptedByBookingBoss, from} = concert
        if (isAcceptedByBookingBoss === true) {
          if (Date.now() &lt;= from) {
            acceptedFutureBookings[key] = concert
          } else {
            acceptedPreviousBookings[key] = concert
          }
        } else if (isAcceptedByBookingBoss === &quot;unhandled&quot;) {
          awaitingBookings[key] = concert
        }
      })
    }

    return (
      &lt;div&gt;
        {showPreviousConcerts &amp;&amp; Object.keys(acceptedPreviousBookings).length !== 0 &amp;&amp;
          &lt;InfoSnippet
            icon=&quot;history&quot;
            orientation=&quot;portrait&quot;
            disableTitle
            disableHover
            alignSubText=&quot;center&quot;
            subText=&quot;Previous concerts&quot;
          &gt;
            &lt;Table&gt;
              &lt;TableHeader adjustForCheckbox={false} displaySelectAll={false}&gt;
                &lt;TableRow&gt;
                  &lt;TableHeaderColumn&gt;Concert date&lt;/TableHeaderColumn&gt;
                  &lt;TableHeaderColumn&gt;Tickets sold&lt;/TableHeaderColumn&gt;
                  &lt;TableHeaderColumn&gt;Total income&lt;/TableHeaderColumn&gt;
                &lt;/TableRow&gt;
              &lt;/TableHeader&gt;
              &lt;TableBody displayRowCheckbox={false} showRowHover&gt;
                {Object.keys(acceptedPreviousBookings).map(key =&gt; {
                  const {from, participants, ticketPrice, bandFee} = acceptedPreviousBookings[key]
                  return (
                    &lt;TableRow key={key}&gt;
                        &lt;TableRowColumn&gt;{parseDate(from)}&lt;/TableRowColumn&gt;
                        &lt;TableRowColumn&gt;{parseNumber(participants)}&lt;/TableRowColumn&gt;
                        &lt;TableRowColumn&gt;{parsePrice(participants*ticketPrice-bandFee)}&lt;/TableRowColumn&gt;
                      &lt;/TableRow&gt;
                  )
                })}
              &lt;/TableBody&gt;
            &lt;/Table&gt;
          &lt;/InfoSnippet&gt;
        }
        {showFutureConcerts &amp;&amp; Object.keys(acceptedFutureBookings).length !== 0 &amp;&amp;
          &lt;InfoSnippet
            icon=&quot;bookmark&quot;
            orientation=&quot;portrait&quot;
            disableTitle
            disableHover
            alignSubText=&quot;center&quot;
            subText=&quot;Upcoming concerts&quot;
            content={&lt;ConcertTable concerts={acceptedFutureBookings}/&gt;}
          /&gt;
        }
        {showFutureConcerts &amp;&amp; Object.keys(awaitingBookings).length !== 0 &amp;&amp;
          &lt;InfoSnippet
            icon=&quot;bookmark_border&quot;
            orientation=&quot;portrait&quot;
            disableTitle
            disableHover
            alignSubText=&quot;center&quot;
            subText=&quot;Awating approval&quot;
            content={&lt;ConcertTable concerts={awaitingBookings}/&gt;}
          /&gt;
        }
      &lt;/div&gt;
    )
  }
}

/**
  * Display a list of concerts in a table
  * @param {Object} props
  * @param {Object} props.concerts - List of concerts
  * @return {JSX} Return a list of concerts
*/
const ConcertTable = ({concerts}) =&gt; (
  &lt;Table&gt;
    &lt;TableHeader adjustForCheckbox={false} displaySelectAll={false}&gt;
      &lt;TableRow&gt;
        &lt;TableHeaderColumn&gt;Concert date&lt;/TableHeaderColumn&gt;
        &lt;TableHeaderColumn&gt;Ticket price&lt;/TableHeaderColumn&gt;
        &lt;TableHeaderColumn&gt;Contact&lt;/TableHeaderColumn&gt;
      &lt;/TableRow&gt;
    &lt;/TableHeader&gt;
    &lt;TableBody displayRowCheckbox={false} showRowHover&gt;
      {Object.keys(concerts).map(key =&gt; {
        const {from, ticketPrice, contact} = concerts[key]
        return (
          &lt;TableRow key={key}&gt;
            &lt;TableRowColumn&gt;{parseDate(from)}&lt;/TableRowColumn&gt;
            &lt;TableRowColumn&gt;{ticketPrice === 0 ? &quot;No price yet&quot; : parsePrice(ticketPrice)}&lt;/TableRowColumn&gt;
            &lt;TableRowColumn&gt;&lt;a style={{color: muiTheme.palette.accent1Color}} href={`mailto:${contact}`}&gt;{contact}&lt;/a&gt;&lt;/TableRowColumn&gt;
          &lt;/TableRow&gt;
        )
      })}
    &lt;/TableBody&gt;
  &lt;/Table&gt;
)
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
